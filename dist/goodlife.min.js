(function(e){e.store={_loadItems:function(){var e=localStorage.getItem("items");return e||localStorage.setItem("items",JSON.stringify({})),JSON.parse(localStorage.getItem("items"))},_saveItems:function(e){localStorage.setItem("items",JSON.stringify(e))},MAX_AGE:6e4,setCacheMaxAge:function(e){this.MAX_AGE=e},itemExists:function(e){var t=this._loadItems();return localStorage.getItem(e)&&t[e]?!0:!1},_birth:function(e){var t=this._loadItems();t[e]={},t[e].birth=Date.now(),this._saveItems(t)},_kill:function(e){var t=this._loadItems();delete t[e],this._saveItems(t)},age:function(e){var t=this._loadItems();if(this.itemExists(e)){var t=this._loadItems();if(t[e]){var n=Date.now()-t[e].birth;return n}}},_isTooOld:function(e){return this.age(e)>this.MAX_AGE},_markAccess:function(e){if(this.itemExists(e)){var t=this._loadItems();t[e].lastAccess=Date.now(),this._saveItems(t)}},init:function(){localStorage.setItem("items",JSON.stringify({}))},localStorageSupport:function(){try{return"localStorage"in window&&window.localStorage!==null}catch(e){return!1}},get:function(e){if(this.localStorageSupport()&&this.itemExists(e)&&!this._isTooOld(e)){this._markAccess(e);var t=localStorage.getItem(e),n=this._loadItems();return n[e].isObject?t=JSON.parse(t):n[e].isNumber&&(t=parseFloat(t)),t}},save:function(e,t){if(this.localStorageSupport()){var n,r;typeof t=="object"?(t=JSON.stringify(t),n=!0):typeof t=="number"&&(r=!0),localStorage.setItem(e,t),this._birth(e);if(n){var i=this._loadItems();i[e].isObject=!0,this._saveItems(i)}else if(r){var i=this._loadItems();i[e].isNumber=!0,this._saveItems(i)}return i||(i=this._loadItems()),i[e].birth}},remove:function(e){if(this.localStorageSupport()){var t=this._loadItems();localStorage.removeItem(e),delete t[e],this._saveItems(t)}},clear:function(){this.localStorageSupport()&&(localStorage.clear(),this.init())}}})(window.GoodLife=window.GoodLife||{});